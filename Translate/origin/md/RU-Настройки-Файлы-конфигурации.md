### Файл конфигурации

Файл конфигурации имеет популярный Json формат и для его изменения можно воспользоваться любым текстовым редактором. Рабочий пример [конфигурационного файла](https://raw.githubusercontent.com/ClaudiaCoord/MIDI-EasyControl-to-Mackie-translator-for-Premiere-Pro/main/docs/Dist/MidiController.cnf) также входит в дистрибутив. Найти его вы можете в папке установки приложения, копия настроенной конфигурации находиться в под-папке __docs__ с именем __MidiController.cnf__.

Основные параметры файла конфигурации можно настроить из запускаемого диалога при выборе пункта меню [__Старт__](RU-Запуск). Вы также можете настроить эти параметры непосредственно при редактировании файла конфигурации.

### Секция общей конфигурации

```
{
  "config": {
    "name": "MidiController",
    "autostart": true,
    "build": "1.0.6.3"
  },
  "units":[... описание элементов управления контроллера...]
}
```

Более подробно значения глобальных параметров и их взаимосвязь описаны в разделе [Настройки](RU-Настройки)

### Настройки модулей

Вся информация о настройке модулей находится в общем конфигурационном файле. Также, возможно жёстко переопределить настройку конкретного модуля, расположив одноименный с модулем файл настроек с расширением `.json` в том же каталоге. Пример на картинке ниже.

![](https://claudiacoord.github.io/MIDI-MT/images/helper/plugin-config.png)

JSON секции настроек модулей находяться в описании самих [модулей](RU-Настройи).

### Секция конфигурации элементов управления "units"

Строка описания элемента управления выглядит следующим образом:

```
{
    "scene":177,       // сцена контрола
    "id":22,           // номер контрола
    "type":1,          // тип контрола
    "target":254,      // группа
    "longtarget":12,   // назначение
    "onoff": false,    // последние значение
    "value": 2,        // последние значение
    "apps": [          // список приложений для Аудио сессий
       "App1",
       "App2"
    ]
}
```

![](https://claudiacoord.github.io/MIDI-MT/images/helper/ctrl9.png)  

__Сцена (scene)__, в конфигурации указывается реальный Scene MIDI ID.  
Сцена это выбранный пресет, в контроллере их 4:  

| MIDI ID | Сцена | примичание                           |
| ------- | ----- | ------------------------------------ |
| 176     | 1     | нет                                  |
| 177     | 2     | нет                                  |
| 178     | 3     | нет                                  |
| 179     | 4     | нет                                  |
| 192     | 1     | для контрола JOG                     |
| 193     | 2     | для контрола JOG                     |
| 194     | 3     | для контрола JOG                     |
| 211     | 4     | для контрола JOG                     |
| 243     | 4     | для двух верхних кнопок по бокам JOG |
| 255     | -     | сцена не выбрана                     |

__ID (id)__, MIDI идентификатор контрола, тут надеюсь всё понятно.  

| MIDI ID   | возможные значения                                 |
| --------- | -------------------------------------------------- |
| 9         | ползунок A-B, фиксированное значение               |
| 10        | валкодер JOG, фиксированное значение               |
| 64        | правая кнопка от валкодера, фиксированное значение |
| 67        | левая кнопка от валкодера, фиксированное значение  |
| 0 - 170   | любые значения в этом диапазоне                    |
| 170 - 248 | используются для обозначения сцен                  |
| 249 - 254 | используются для обозначения групп                 |
| 255       | не определено                                      |

__Тип (type)__ контрола:  

| №   | тип контрола                        | enum           |
| --- | ----------------------------------- | -------------- |
| 0   | круговой потенциометр               | FADER          |
| 1   | потенциометр "ползунок"             | SLIDER         |
| 2   | JOG, валкодер                       | KNOB           |
| 3   | кнопка                              | BUTTON         |
| 4   | кнопка с включенным режимом toggle  | BUTTON TOGGLE  |
| 5   | JOG, валкодер, инверсия направлений | KNOB INVERSE   |
| 6   | круговой потенциометр, инверсия     | FADER INVERSE  |
| 7   | потенциометр "ползунок", инверсия   | SLIDER INVERSE |
| 255 | не определено                       | -              |

__Назначение (target,longtarget)__, назначение полезной нагрузки контрола.  
Для кнопок, первое значение, __target__ - это быстрое нажатие, второе значение, __longtarget__ - длинное нажатие. Если нет необходимости использовать длинное нажатие, присвойте свойству __longtarget__ значение 255. Для других типов контролов, второе значение не обрабатывается, но требует установленного значения.  

| №       | полезная нагрузка                                   |
| ------- | --------------------------------------------------- |
| 0       | аудио громкость (мастер)                            |
| 1       | аудио баланс, панорама (мастер)                     |
| 2       | аудио mute (мастер)                                 |
| 3       | аудио solo (мастер)                                 |
| 4       | JOG - видео покадровая перемотка                    |
| 5  - 13 | аудио громкость - каналы 1-9                        |
| 14 - 22 | аудио баланс, панорама - каналы 1-9                 |
| 23 - 31 | аудио Solo - каналы 1-9                             |
| 32 - 40 | аудио Mute - каналы 1-9                             |
| 41 - 49 | аудио Select - каналы 1-9                           |
| 50 - 57 | функции F1-F8, стандартный режим работы кнопки      |
| 58 - 65 | функции F1-F8, срабатывает пока кнопка удерживается |
| 66      | Rewind                                              |
| 67      | Forward                                             |
| 68      | Stop                                                |
| 69      | Play                                                |
| 70      | Record                                              |
| 71      | Up                                                  |
| 72      | Down                                                |
| 73      | Left                                                |
| 74      | Right                                               |
| 75      | Zoom                                                |
| 76      | Scrub                                               |
| 255     | элемент не выбран                                   |

Также, значение __target__ может обозначать отношение к группе, как в случаях с группами `Аудио сессии`,`Мультимедийные клавиши` , `Управление светом` и `Умный Дом`. В этом случае, значение __longtarget__ определяет полезную нагрузку.

| №   | группа                           |
| --- | -------------------------------- |
| 250 | модуль  Управление светом 16 бит |
| 251 | модуль  Управление светом 8 бит  |
| 252 | модуль  Умный Дом                |
| 253 | модуль  Мультимедийные клавиши   |
| 254 | модуль  Аудио сессии             |
| 255 | элемент не выбран                |

### Рабочий пример конфигурации элементов управления

```
{
    ....,
    /* настройка для сцены 2 */

    "units":[
        {"scene":177,"id":22,"type":0,"target":0,"longtarget":255},
        {"scene":177,"id":13,"type":1,"target":1,"longtarget":255},
        {"scene":177,"id":31,"type":3,"target":3,"longtarget":255},
    ]
}
```
